---
name: Free mode, dry-run, and npm packaging
status: open
created: 2026-02-17T16:35:56Z
updated: 2026-02-17T18:36:13Z
github: https://github.com/gilpaAI/ai-cartographer/issues/10
depends_on: [7]
parallel: true
conflicts_with: []
---

# Task: Free mode, dry-run, and npm packaging

## Description
Implement the --free flag (no API key required, pattern-based descriptions), --dry-run (cost estimation without scanning), and prepare the package for npm publishing.

## Acceptance Criteria
- [ ] `--free` flag generates context map using filename/pattern-based descriptions only
- [ ] Free mode patterns: *.test.ts → "Test file for {base}", migrations/*.sql → "Database migration", index.ts → "Module entry point", *.config.* → "Configuration file", etc.
- [ ] Free mode completes in <10s for any repo size (no API calls)
- [ ] `--dry-run` shows: total files, tier breakdown (auto-skip/batch/deep counts), estimated API cost, estimated time
- [ ] Dry-run exits without making any API calls or writing files
- [ ] Package.json configured for npm publish: name, version, bin, files, repository, keywords
- [ ] README.md with: quick start, features, configuration reference, integration guide (Cursor, Claude Code, Copilot)
- [ ] .npmignore or files field excludes tests, src (only dist)
- [ ] `npm pack` produces clean tarball

## Technical Details
- Free mode: Map<RegExp, (filename) => string> for pattern-based descriptions
- Dry-run: run discovery + classification, compute cost estimate, print summary, exit
- Package: bin field points to dist/cli.js, prepublishOnly runs build
- README sections: Quick Start, How It Works, Configuration, Integration, Cost Estimates, Contributing

## Dependencies
- [ ] Task 7 (init pipeline for --free and --dry-run integration)

## Effort Estimate
- Size: M
- Hours: 6
- Parallel: true (can develop alongside 8, 9)

## Definition of Done
- [ ] --free mode produces useful output without API key
- [ ] --dry-run shows accurate cost estimates
- [ ] npm pack produces clean publishable package
- [ ] README is complete and accurate
